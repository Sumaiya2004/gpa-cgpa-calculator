let regulations = {
    "2019": {
        "IT": {
            "Semester 1": [
                {
                    "subject": "Communicative English ",
                    "credit": 2
                },
                {
                    "subject": " Engineering Chemistry",
                    "credit": 3
                },
                {
                    "subject": " Matrices, Differential and Integral Calculus",
                    "credit": 4
                },
                {
                    "subject": "Programming for problem solving in C ",
                    "credit": 3
                },
                {
                    "subject": "Engineering Graphics",
                    "credit": 4
                },
                {
                    "subject": " Chemistry Laboratory",
                    "credit": 1
                },
                {
                    "subject": " C Programming Laboratory",
                    "credit": 2
                },
                {
                    "subject": " Communicative English Laboratory ",
                    "credit": 1
                }
               
            ],
            "Semester 2": [
                {
                    "subject": "Vector Calculus and Complex Functions",
                    "credit": 4
                },
                {
                    "subject": "Engineering Physics",
                    "credit": 3
                },
                {
                    "subject": " Programming for problem solving using Python",
                    "credit": 4
                },
                {
                    "subject": " Basic Electrical, Electronics and Communication Engineering  ",
                    "credit": 3
                },
                {
                    "subject": "Introduction to Information and Computing Technology ",
                    "credit": 3
                },
                {
                    "subject":" Constitution of India",
                    "credit": 0
                },
                {
                    "subject": "Physics Laboratory",
                    "credit": 1
                },
                {
                    "subject": " Workshop Practice",
                    "credit": 2
                },
                {
                    "subject": "Basic Electrical, Electronics & Communication Engineering Laboratory",
                    "credit": 1
                },
                {
                    "subject": " Quantitative Aptitude and Verbal Reasoning",
                    "credit": 1
                }

            ],
            "Semester 3": [
                {
                    "subject": "Data Structures",
                    "credit": 3
                },
                {
                    "subject": "Digital Logic Circuits",
                    "credit": 4
                },
                {
                    "subject": "Object Oriented Programming",
                    "credit": 3
                },
                {
                    "subject": "Computer Architecture",
                    "credit": 3
                },
                {
                    "subject": "Discrete Mathematics",
                    "credit": 4
                },
                 {
                    "subject": "Heritage Of Tamil",
                    "credit": 1
                },
                {
                    "subject": "Fundamentals of Nano Science",
                    "credit": 0
                },
                {
                    "subject": "Data Structures Laboratory",
                    "credit": 1
                },
                {
                    "subject": "Object Oriented Programming Laboratory",
                    "credit": 1
                },
                {
                    "subject": "Personality & Character Development",
                    "credit": 0
                },
                {
                    "subject": "Quantitative Aptitude & Behavioral Skills",
                    "credit": 1
                }
               
            ],
            "Semester 4": [
                {
                    "subject": "Probability and Statistics",
                    "credit": 4
                },
                {
                    "subject": " Operating system",
                    "credit": 3
                },
                {
                    "subject": " Design and Analysis of Algorithms ",
                    "credit": 4
                },
                {
                    "subject": " Object Oriented Software Engineering",
                    "credit": 3
                },
                {
                    "subject": " Database Management Systems",
                    "credit": 3
                },
                {
                    "subject": " Java programming",
                    "credit": 3
                },
                {
                    "subject": "Tamil and Technology",
                    "credit": 1
                },
                {
                    "subject": " Environmental Science and Engineering",
                    "credit": 0
                },
                {
                    "subject": " Operating system Laboratory",
                    "credit": 1
                },
                {
                    "subject": "Database Management Systems Laboratory",
                    "credit": 1
                },
                {
                    "subject": " Java Programming Laboratory ",
                    "credit": 1
                },
                {
                    "subject": " Quantitative Aptitude & Communication Skills ",
                    "credit": 1
                }
            ],
            "Semester 5": [
                {
                    "subject": "Web Technologies ",
                    "credit": 3
                },
                {
                    "subject": "Compiler Engineering",
                    "credit": 4
                },
                {
                    "subject": "Data Communication and Networking",
                    "credit": 3
                },
                {
                    "subject": "Professional Ethics and Human Values",
                    "credit": 3
                },
                 {
                    "subject": "Professional Elective I",
                    "credit": 3
                },
                {
                    "subject": "Open Elective I",
                    "credit": 3
                },
                {
                    "subject": "Web Technologies Laboratory",
                    "credit": 1
                }, {
                    "subject": " Data Communication and Networking Laboratory ",
                    "credit": 1
                },
                {
                    "subject": " Quantitative Aptitude and Soft Skills ",
                    "credit": 1
                },

                
            ],
            "Semester 6": [
                {
                    "subject": "Computational Intelligence ",
                    "credit": 3
                },
                {
                    "subject": " Big Data Analytics ",
                    "credit": 3
                },
                {
                    "subject": "Mobile Communication ",
                    "credit": 3
                },
                {
                    "subject": "Information Security",
                    "credit": 3
                },
                {
                    "subject": "Professional Elective II",
                    "credit": 3
                },
                {
                    "subject": "Open Elective II ",
                    "credit": 3
                },
                {
                    "subject": " Mobile Application Development Laboratory",
                    "credit": 1
                },
                {
                    "subject": " Intelligent System Laboratory ",
                    "credit": 1
                },
                {
                    "subject": "Internship ",
                    "credit": 1
                },
                {
                    "subject": " Mini Project ",
                    "credit": 1
                },
               
            ],
            "Semester 7": [
                {
                    "subject": " Cryptography and Network Security",
                    "credit": 3
                },
                {
                    "subject": "Blockchain Technologies ",
                    "credit": 4
                },
                {
                    "subject": " Cloud Computing and Virtualization ",
                    "credit": 3
                },
                {
                    "subject": " Professional Elective-III",
                    "credit": 3
                },
                {
                    "subject": "Professional Elective-IV",
                    "credit": 3
                },
                {
                    "subject": "Open Elective-III  ",
                    "credit": 3
                },
                {
                    "subject": "Advanced Computing Laboratory",
                    "credit": 2
                },
                {
                    "subject": " Security Laboratory  ",
                    "credit": 2
                },
               
            ],
            "Semester 8": [
                {
                    "subject": "Professional Elective-V ",
                    "credit": 3
                },
                {
                    "subject": "Professional Elective-VI",
                    "credit": 3
                },
                {
                    "subject": "Project Work",
                    "credit": 6
                },
            ]
        }
    }   
        
            
       
}

const grades = {
    "O": 10,
    "A+": 9,
    "A": 8,
    "B+": 7,
    "B": 6,
    "C+": 5,
    "C": 4,
    "U": 0
};

function updateCourses() {
    let regulation = document.getElementById("regulation").value;
    let courseDropdown = document.getElementById("course");
    courseDropdown.innerHTML = "";

    for (let course in regulations[regulation]) {
        let option = document.createElement("option");
        option.value = course;
        option.textContent = course;
        courseDropdown.appendChild(option);
    }

    updateSemesters();
}

function updateSemesters() {
    let regulation = document.getElementById("regulation").value;
    let course = document.getElementById("course").value;
    let semesterDropdown = document.getElementById("semester");
    semesterDropdown.innerHTML = "";

    for (let semester in regulations[regulation][course]) {
        let option = document.createElement("option");
        option.value = semester;
        option.textContent = semester;
        semesterDropdown.appendChild(option);
    }
}
function goToSubjectsPage() {
    let regulation = document.getElementById("regulation").value;
    let course = document.getElementById("course").value;
    let semester = document.getElementById("semester").value;

    localStorage.setItem("selectedRegulation", regulation);
    localStorage.setItem("selectedCourse", course);
    localStorage.setItem("selectedSemester", semester);

    window.location.href = "subjects.html";
}

function populateSubjects() {
    let regulation = localStorage.getItem("selectedRegulation");
    let course = localStorage.getItem("selectedCourse");
    let semester = localStorage.getItem("selectedSemester");

    let subjects = regulations[regulation][course][semester];
    let container = document.getElementById("subjectsContainer");

    subjects.forEach(subjectObj => {
        let label = document.createElement("label");
  
        label.textContent = subjectObj.subject+" ("+subjectObj.credit+")";
        let select = document.createElement("select");
        for (let grade in grades) {
            let option = document.createElement("option");
            option.value = grade;
            option.textContent = grade;
            select.appendChild(option);
        }

        container.appendChild(label);
        container.appendChild(select);
    });
}

function calculateGPA() {
    let selects = document.getElementById("subjectsContainer").querySelectorAll("select");
    let totalGradePoints = 0;
    let totalCredits = 0;
    
    selects.forEach((select, index) => {
        let regulation = localStorage.getItem("selectedRegulation");
        let course = localStorage.getItem("selectedCourse");
        let semester = localStorage.getItem("selectedSemester");

        let credit = regulations[regulation][course][semester][index].credit;
        totalCredits += credit;

        totalGradePoints += grades[select.value] * credit;
    });
    
    let gpa = totalGradePoints / totalCredits;
    let ele = document.getElementById("result")
    ele.innerHTML = `<span>Your GPA:</span> ${gpa.toFixed(3)}`;
    ele.scrollIntoView();
}



if (window.location.pathname.includes("gpa-calculator")) {
    updateCourses();
}

if (window.location.pathname.includes("subjects.html")) {
    populateSubjects();
}

